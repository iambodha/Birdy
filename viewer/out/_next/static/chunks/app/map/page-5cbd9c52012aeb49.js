(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{2427:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var l=a(5155),r=a(2115),i=a(7298),s=a(4186),n=a(9946);let c=(0,n.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=a(9881),d=a(4516),u=a(7580);let x=(0,n.A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),h=(0,n.A)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);var m=a(4416),g=a(4242);function f(){var e,t;let[a,n]=(0,r.useState)([]),[f,v]=(0,r.useState)([]),[y,p]=(0,r.useState)(new Set),[j,b]=(0,r.useState)({minLat:-90,maxLat:90,minLon:-180,maxLon:180}),[k,N]=(0,r.useState)(1),[A,w]=(0,r.useState)({lat:0,lon:0}),[C,L]=(0,r.useState)(!0),[S,M]=(0,r.useState)(null),[_,z]=(0,r.useState)(null),[F,E]=(0,r.useState)({totalAircraft:0,airborneAircraft:0,groundAircraft:0,trackedCountries:0}),[P,D]=(0,r.useState)(!1),[R,G]=(0,r.useState)(!0),[O,q]=(0,r.useState)(""),[I,T]=(0,r.useState)(!1),U=(0,r.useRef)(null),H=(0,r.useRef)(null),B=g.A.getInstance(),[V]=(0,r.useState)({maxAircraftDisplay:1e3,chunkSize:250,viewportPadding:20}),X=async()=>{try{L(!0);let e=await B.getLiveAircraft(),t=e.aircraft||[],a=e.stats||{};n(t),M(new Date),E({totalAircraft:a.totalAircraft||0,airborneAircraft:a.airborneAircraft||0,groundAircraft:a.groundAircraft||0,trackedCountries:a.trackedCountries||0})}catch(e){console.error("Failed to fetch aircraft data:",e)}finally{L(!1)}},W=(0,r.useCallback)(()=>k<.5?{maxDisplay:300,prioritizeAirborne:!0,minAltitudeFilter:1e4,skipGroundAircraft:!0}:k<1?{maxDisplay:600,prioritizeAirborne:!0,minAltitudeFilter:1e3,skipGroundAircraft:!1}:{maxDisplay:1e3,prioritizeAirborne:!1,minAltitudeFilter:null,skipGroundAircraft:!1},[k]),Y=(0,r.useMemo)(()=>{if(!a.length)return[];let e=W(),t=[...a];if(e.skipGroundAircraft&&(t=t.filter(e=>!e.on_ground)),e.minAltitudeFilter&&(t=t.filter(t=>!t.baro_altitude||t.baro_altitude>=e.minAltitudeFilter)),O){let e=O.toLowerCase();t=t.filter(t=>{var a,l;return t.icao24.toLowerCase().includes(e)||(null==(a=t.callsign)?void 0:a.toLowerCase().includes(e))||(null==(l=t.origin_country)?void 0:l.toLowerCase().includes(e))})}return P&&(t=t.filter(e=>!e.on_ground)),t.sort((t,a)=>{if(e.prioritizeAirborne&&t.on_ground!==a.on_ground)return t.on_ground?1:-1;let l=t.baro_altitude||0,r=a.baro_altitude||0;if(l!==r)return r-l;let i=t.velocity||0;return(a.velocity||0)-i}),t.slice(0,e.maxDisplay)},[a,O,P,W]),Z=(0,r.useMemo)(()=>Y.filter(e=>null!==e.longitude&&null!==e.latitude&&e.longitude>=j.minLon-V.viewportPadding&&e.longitude<=j.maxLon+V.viewportPadding&&e.latitude>=j.minLat-V.viewportPadding&&e.latitude<=j.maxLat+V.viewportPadding),[Y,j,V.viewportPadding]),[$,J]=(0,r.useState)([]),[K,Q]=(0,r.useState)(0);(0,r.useEffect)(()=>{Q(0),J([]),J(Z.slice(0,V.chunkSize))},[Z,V.chunkSize]),(0,r.useEffect)(()=>{if(0===K)return;let e=setTimeout(()=>{let e=K*V.chunkSize,t=e+V.chunkSize,a=Z.slice(e,t);a.length>0&&J(e=>[...e,...a])},100);return()=>clearTimeout(e)},[K,Z,V.chunkSize]);let ee=(0,r.useCallback)(()=>{K<Math.ceil(Z.length/V.chunkSize)-1&&Q(e=>e+1)},[Z.length,V.chunkSize,K]),et=(0,r.useCallback)(e=>{b(e)},[]),ea=(0,r.useCallback)(e=>{let t=e.currentTarget.getBoundingClientRect(),a=(e.clientX-t.left)/t.width,l=(e.clientY-t.top)/t.height,r=360*a-180,i=90-180*l;w({lat:i,lon:r});let s=180/k,n=360/k;et({minLat:Math.max(-90,i-s/2),maxLat:Math.min(90,i+s/2),minLon:Math.max(-180,r-n/2),maxLon:Math.min(180,r+n/2)})},[k,et]),el=(0,r.useCallback)(e=>{if(1===e.touches.length){let t=e.touches[0],a=e.currentTarget.getBoundingClientRect(),l=(t.clientX-a.left)/a.width,r=(t.clientY-a.top)/a.height,i=360*l-180,s=90-180*r;w({lat:s,lon:i});let n=180/k,c=360/k;et({minLat:Math.max(-90,s-n/2),maxLat:Math.min(90,s+n/2),minLon:Math.max(-180,i-c/2),maxLon:Math.min(180,i+c/2)})}},[k,et]),er=(0,r.useCallback)(()=>{N(e=>Math.min(8,1.5*e))},[]),ei=(0,r.useCallback)(()=>{N(e=>Math.max(.25,e/1.5))},[]);(0,r.useEffect)(()=>{let e=a;if(P&&(e=e.filter(e=>!e.on_ground)),O){let t=O.toLowerCase();e=e.filter(e=>{var a,l;return e.icao24.toLowerCase().includes(t)||(null==(a=e.callsign)?void 0:a.toLowerCase().includes(t))||(null==(l=e.origin_country)?void 0:l.toLowerCase().includes(t))})}v(e)},[a,P,O]),(0,r.useEffect)(()=>(R?H.current=setInterval(X,3e4):H.current&&clearInterval(H.current),()=>{H.current&&clearInterval(H.current)}),[R]),(0,r.useEffect)(()=>{X()},[]);let es=e=>null===e?"N/A":"".concat(Math.round(e).toLocaleString()," ft"),en=e=>null===e?"N/A":"".concat(Math.round(e)," kt"),ec=e=>e||"N/A";return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,l.jsxs)("div",{className:"bg-gray-800 p-4 shadow-lg",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,l.jsx)(i.A,{className:"w-6 h-6"}),"Live Flight Map"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,l.jsx)(s.A,{className:"w-4 h-4"}),S?"Updated: ".concat(S.toLocaleTimeString()):"Loading..."]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search callsign, ICAO24, or country...",value:O,onChange:e=>q(e.target.value),className:"px-3 py-2 bg-gray-700 rounded text-sm w-64"}),(0,l.jsx)("button",{onClick:()=>D(!P),className:"px-3 py-2 rounded text-sm ".concat(P?"bg-blue-600":"bg-gray-600"),children:"Airborne Only"}),(0,l.jsx)("button",{onClick:()=>G(!R),className:"px-3 py-2 rounded text-sm ".concat(R?"bg-green-600":"bg-gray-600"),children:"Auto Refresh"}),(0,l.jsxs)("button",{onClick:X,disabled:C,className:"px-3 py-2 bg-blue-600 rounded text-sm flex items-center gap-2 disabled:opacity-50",children:[(0,l.jsx)(c,{className:"w-4 h-4 ".concat(C?"animate-spin":"")}),"Refresh"]})]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-6 mt-4 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(i.A,{className:"w-4 h-4 text-blue-400"}),(0,l.jsxs)("span",{children:["Total: ",F.totalAircraft.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(o.A,{className:"w-4 h-4 text-green-400"}),(0,l.jsxs)("span",{children:["Airborne: ",F.airborneAircraft.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(d.A,{className:"w-4 h-4 text-orange-400"}),(0,l.jsxs)("span",{children:["Ground: ",F.groundAircraft.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(u.A,{className:"w-4 h-4 text-purple-400"}),(0,l.jsxs)("span",{children:["Countries: ",F.trackedCountries]})]}),(0,l.jsxs)("div",{className:"text-gray-400",children:["Displaying: ",$.length.toLocaleString()," / ",Y.length.toLocaleString()]})]})]}),(0,l.jsxs)("div",{className:"relative flex-1",ref:U,children:[(0,l.jsxs)("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[(0,l.jsx)("button",{onClick:er,className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-lg font-bold",children:"+"})}),(0,l.jsx)("button",{onClick:ei,className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-lg font-bold",children:"âˆ’"})}),(0,l.jsx)("button",{onClick:()=>{if(document.fullscreenElement)document.exitFullscreen(),T(!1);else{var e;null==(e=U.current)||e.requestFullscreen(),T(!0)}},className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-center",children:I?(0,l.jsx)(x,{className:"w-4 h-4"}):(0,l.jsx)(h,{className:"w-4 h-4"})})]}),K<Math.ceil(Z.length/V.chunkSize)-1&&(0,l.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10",children:(0,l.jsxs)("button",{onClick:ee,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm",children:["Load More Aircraft (",Z.length-$.length," remaining)"]})}),(0,l.jsxs)("div",{className:"map-viewport w-full h-screen bg-gray-800 relative cursor-crosshair",onMouseDown:ea,onTouchStart:el,children:[$.map(e=>{if(null===e.longitude||null===e.latitude)return null;let t=(e.longitude+180)/360*100,a=(90-e.latitude)/180*100;return(0,l.jsx)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all duration-200 ".concat((null==_?void 0:_.icao24)===e.icao24?"z-20 scale-150":"z-10"),style:{left:"".concat(t,"%"),top:"".concat(a,"%")},onClick:t=>{t.stopPropagation(),z(e)},children:(0,l.jsxs)("div",{className:"relative ".concat(e.on_ground?"text-orange-400":"text-green-400"),children:[(0,l.jsx)(i.A,{className:"w-3 h-3",style:{transform:e.true_track?"rotate(".concat(e.true_track,"deg)"):"none"}}),(null==_?void 0:_.icao24)===e.icao24&&(0,l.jsxs)("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 bg-gray-900 border border-gray-600 rounded-lg p-2 text-xs whitespace-nowrap shadow-lg",children:[(0,l.jsx)("div",{className:"font-semibold",children:ec(e.callsign)}),(0,l.jsxs)("div",{children:["ICAO24: ",e.icao24]}),(0,l.jsxs)("div",{children:["Country: ",e.origin_country||"Unknown"]}),(0,l.jsxs)("div",{children:["Altitude: ",es(e.baro_altitude)]}),(0,l.jsxs)("div",{children:["Speed: ",en(e.velocity)]}),(0,l.jsxs)("div",{children:["Status: ",e.on_ground?"Ground":"Airborne"]})]})]})},e.icao24)}),C&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-30",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(c,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,l.jsx)("div",{className:"text-lg",children:"Loading aircraft data..."})]})}),(0,l.jsxs)("div",{className:"absolute bottom-4 left-4 bg-gray-900 bg-opacity-90 rounded-lg p-3 text-xs",children:[(0,l.jsxs)("div",{children:["Zoom: ",k.toFixed(2),"x"]}),(0,l.jsxs)("div",{children:["Center: ",A.lat.toFixed(2),"\xb0, ",A.lon.toFixed(2),"\xb0"]}),(0,l.jsxs)("div",{children:["Viewport: ",j.minLat.toFixed(1),"\xb0 to ",j.maxLat.toFixed(1),"\xb0"]})]})]})]}),_&&(0,l.jsx)("div",{className:"fixed top-0 right-0 w-80 h-full bg-gray-800 shadow-lg z-40 overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"Aircraft Details"}),(0,l.jsx)("button",{onClick:()=>z(null),className:"p-1 hover:bg-gray-700 rounded",children:(0,l.jsx)(m.A,{className:"w-5 h-5"})})]}),(0,l.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Callsign"}),(0,l.jsx)("div",{className:"font-semibold",children:ec(_.callsign)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"ICAO24"}),(0,l.jsx)("div",{className:"font-mono",children:_.icao24})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Country"}),(0,l.jsx)("div",{children:_.origin_country||"Unknown"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Position"}),(0,l.jsxs)("div",{children:[null==(e=_.latitude)?void 0:e.toFixed(4),"\xb0, ",null==(t=_.longitude)?void 0:t.toFixed(4),"\xb0"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Altitude"}),(0,l.jsx)("div",{children:es(_.baro_altitude)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Ground Speed"}),(0,l.jsx)("div",{children:en(_.velocity)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Heading"}),(0,l.jsx)("div",{children:_.true_track?"".concat(Math.round(_.true_track),"\xb0"):"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Vertical Rate"}),(0,l.jsx)("div",{children:_.vertical_rate?"".concat(_.vertical_rate>0?"+":"").concat(Math.round(_.vertical_rate)," ft/min"):"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Status"}),(0,l.jsx)("div",{className:_.on_ground?"text-orange-400":"text-green-400",children:_.on_ground?"On Ground":"Airborne"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Squawk"}),(0,l.jsx)("div",{className:"font-mono",children:_.squawk||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-gray-400",children:"Last Contact"}),(0,l.jsx)("div",{children:new Date(1e3*_.last_contact).toLocaleString()})]})]})]})})]})}},4186:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4416:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4516:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6236:(e,t,a)=>{Promise.resolve().then(a.bind(a,2427))},7298:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},7580:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9881:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var l=a(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...x}=e;return(0,l.createElement)("svg",{ref:t,...s,width:r,height:r,stroke:a,strokeWidth:c?24*Number(n)/Number(r):n,className:i("lucide",o),...x},[...u.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,l.forwardRef)((a,s)=>{let{className:c,...o}=a;return(0,l.createElement)(n,{ref:s,iconNode:t,className:i("lucide-".concat(r(e)),c),...o})});return a.displayName="".concat(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[242,441,684,358],()=>t(6236)),_N_E=e.O()}]);