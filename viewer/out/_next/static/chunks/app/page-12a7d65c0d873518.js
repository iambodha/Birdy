(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3792:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(5155),l=t(2115),r=t(7298),i=t(4516),n=t(9074),c=t(8136),d=t(7580),x=t(7924),o=t(9676),m=t(2355),h=t(3052),g=t(4416),u=t(4186),p=t(9881),j=t(8611),N=t(6874),f=t.n(N),b=t(4242);function y(){var e,s,t,N;let[y,v]=(0,l.useState)([]),[w,A]=(0,l.useState)(null),[_,S]=(0,l.useState)(!0),[k,M]=(0,l.useState)(""),[C,F]=(0,l.useState)(1),[P,O]=(0,l.useState)({page:1,limit:20,total:0,totalPages:0}),[D,L]=(0,l.useState)(null),[E,T]=(0,l.useState)([]),[U,H]=(0,l.useState)(!1),[I,V]=(0,l.useState)(!1),B=b.A.getInstance(),z=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";S(!0);try{let t=await B.getAircraft(e,20,s);v(t.aircraft),O(t.pagination)}catch(e){console.error("Failed to fetch aircraft:",e)}finally{S(!1)}},W=async()=>{try{let e=await B.getStats();A(e)}catch(e){console.error("Failed to fetch stats:",e)}},q=async e=>{H(!0);try{let s=await B.getFlightHistory(e);T(s.flights||[])}catch(e){console.error("Failed to fetch flight history:",e),T([])}finally{H(!1)}};(0,l.useEffect)(()=>{z(C,k)},[C,k]),(0,l.useEffect)(()=>{W()},[]);let G=e=>{L(e),V(!0),q(e.icao24)},J=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString()}catch(s){return e}},K=e=>{try{return new Date(e).toLocaleString()}catch(s){return e}},Q=e=>null===e?"N/A":"".concat(Math.round(e)," ft"),R=e=>null===e?"N/A":"".concat(Math.round(e)," kt"),X=(e,s)=>null===e||null===s?"N/A":"".concat(e.toFixed(4),", ").concat(s.toFixed(4)),Y=e=>{if(!e)return"N/A";let s=Math.floor(e/60);return"".concat(s,"h ").concat(e%60,"m")},Z=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown";return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(r.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Birdy Aircraft Viewer"})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)(f(),{href:"/map",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Live Map"]})})]}),w&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-blue-600 font-medium",children:"Total Aircraft"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:(null==(e=w.totalAircraft)?void 0:e.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Added This Week"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-900",children:(null==(s=w.recentAdditions)?void 0:s.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm text-purple-600 font-medium",children:"Top Manufacturer"})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-purple-900",children:(null==(t=w.topManufacturers[0])?void 0:t.manufacturer_name)||"N/A"})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-orange-600"}),(0,a.jsx)("span",{className:"text-sm text-orange-600 font-medium",children:"Top Operator"})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-orange-900",children:(null==(N=w.topOperators[0])?void 0:N.operator)||"N/A"})]})]}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),F(1),z(1,k)},className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by ICAO24, registration, manufacturer, model, or operator...",value:k,onChange:e=>M(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:_?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("p",{className:"text-gray-600",children:["Showing ",y.length," of ",P.total.toLocaleString()," aircraft",k&&' matching "'.concat(k,'"')]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:y.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.registration||e.icao24}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["ICAO24: ",e.icao24]})]}),(0,a.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg",children:(0,a.jsx)(r.A,{className:"h-5 w-5 text-blue-600"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.manufacturer_name&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Manufacturer:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.manufacturer_name})]}),e.model&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Model:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.model})]}),e.operator&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Operator:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.operator})]}),e.built&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Built:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.built})]}),e.engines&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Engines:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.engines})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Updated: ",J(e.updated_at)]}),(0,a.jsxs)("button",{onClick:()=>G(e),className:"flex items-center gap-1 px-3 py-1 text-xs font-medium text-blue-600 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors",children:[(0,a.jsx)(o.A,{className:"h-3 w-3"}),"View History"]})]})]})},e.id))}),P.totalPages>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>F(Math.max(1,C-1)),disabled:1===C,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,P.totalPages)},(e,s)=>{let t=Math.max(1,Math.min(P.totalPages-4,C-2))+s;return(0,a.jsx)("button",{onClick:()=>F(t),className:"px-3 py-2 text-sm font-medium rounded-md ".concat(t===C?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"),children:t},t)})}),(0,a.jsxs)("button",{onClick:()=>F(Math.min(P.totalPages,C+1)),disabled:C===P.totalPages,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",(0,a.jsx)(h.A,{className:"h-4 w-4"})]})]}),0===y.length&&!_&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(r.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No aircraft found"}),k&&(0,a.jsx)("button",{onClick:()=>{M(""),F(1)},className:"mt-2 text-blue-600 hover:text-blue-500",children:"Clear search"})]})]})}),I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Flight History"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(null==D?void 0:D.registration)||(null==D?void 0:D.icao24)," - ",null==D?void 0:D.icao24]})]}),(0,a.jsx)("button",{onClick:()=>{V(!1),L(null),T([])},className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(g.A,{className:"h-6 w-6"})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:U?(0,a.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):E.length>0?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Found ",E.length," flight journeys"]})}),E.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(r.A,{className:"h-5 w-5 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.callsign||"Unknown Flight"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:J(e.flight_date)})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("span",{className:"px-3 py-1 text-sm rounded-full ".concat("completed"===e.flight_status?"bg-green-100 text-green-700":"active"===e.flight_status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:Z(e.flight_status)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Duration"})]}),(0,a.jsx)("p",{className:"font-semibold",children:Y(e.duration_minutes)})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Max Altitude"})]}),(0,a.jsx)("p",{className:"font-semibold",children:Q(e.max_altitude)})]}),(0,a.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Max Velocity"})]}),(0,a.jsx)("p",{className:"font-semibold",children:R(e.max_velocity)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Departure"}),(0,a.jsx)("p",{className:"font-medium",children:K(e.departure_time)}),e.start_status&&(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Status: ",e.start_status]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Arrival"}),(0,a.jsx)("p",{className:"font-medium",children:K(e.arrival_time)}),e.end_status&&(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Status: ",e.end_status]})]})]}),e.position_count&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.position_count," position reports recorded"]})]}),e.origin_country&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Origin Country:"})," ",e.origin_country]}),e.positions&&e.positions.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Position Data (",e.positions.length," points)"]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"First Position:"}),(0,a.jsx)("div",{className:"font-mono",children:X(e.positions[0].lat,e.positions[0].lon)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Last Position:"}),(0,a.jsx)("div",{className:"font-mono",children:X(e.positions[e.positions.length-1].lat,e.positions[e.positions.length-1].lon)})]})]})]})]},e.id))]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No flight history found for this aircraft"})]})})]})})]})}},7501:(e,s,t)=>{Promise.resolve().then(t.bind(t,3792))}},e=>{var s=s=>e(e.s=s);e.O(0,[742,242,441,684,358],()=>s(7501)),_N_E=e.O()}]);